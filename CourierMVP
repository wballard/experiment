# Looter Shooter Game Design Document

## Game Overview

**Title:** [Working Title]  
**Genre:** Asynchronous Looter Shooter  
**Platform:** Web Browser  
**Core Concept:** Statistical mission-based loot collection game where players send characters on missions and receive rewards based on equipment and probability calculations.

## Player Account & Character Creation

### Account Structure
```
{
  account_id: string,
  email: string,
  created_at: timestamp,
  last_login: timestamp,
  characters: [character_ids]
}
```

### Character Creation Flow
1. **Name Input**: 
   - Min length: 3 characters
   - Max length: 20 characters
   - Allowed: alphanumeric + spaces
   - Must be unique across all characters

2. **Starter Gear Assignment**:
   Each new character receives:
   
   | Slot | Item Name | Stats |
   |------|-----------|-------|
   | Head | Recruit Helmet | Defense +10 |
   | Shoulders | Recruit Pauldrons | Defense +15 |
   | Back | Recruit Pack | Defense +5, Loot Bonus +5% |
   | Chest | Recruit Armor | Defense +20, Health +50 |
   | Gloves | Recruit Gloves | Attack Power +5 |
   | Legs | Recruit Boots | Defense +10, Mission Speed +5% |
   | Bracers | Recruit Bracers | Attack Power +3 |
   | Weapon 1 | Standard Rifle | Damage 50 |
   | Weapon 2 | Basic Pistol | Damage 30 |

   All starter gear is Common (gray) rarity and requires level 1.

3. **Initial Mission**:
   - Automatically queued: "Training Ground"
   - Type: Tutorial
   - Duration: 2 minutes
   - Guaranteed success
   - Rewards: 1 Uncommon item, 500 credits, 100 XP

### Character Data Structure
```
{
  character_id: string,
  account_id: string,
  name: string,
  level: 1,
  experience: 0,
  credits: 0,
  created_at: timestamp,
  tutorial_completed: false,
  inventory_slots: 50,
  active_missions: [],
  equipment: {
    head: starter_helmet,
    shoulders: starter_pauldrons,
    back: starter_pack,
    chest: starter_armor,
    gloves: starter_gloves,
    legs: starter_boots,
    bracers: starter_bracers,
    weapon_1: starter_rifle,
    weapon_2: starter_pistol
  },
  inventory: [],
  statistics: {
    missions_completed: 0,
    total_loot_collected: 0,
    highest_rarity_found: "common"
  }
}
```

### New Player Flow
1. **Account Registration** → Creates account object
2. **Character Creation** → Name input screen
3. **Starter Gear Display** → Show equipped items and stats
4. **Tutorial Mission Start** → Auto-begins 2-minute mission
5. **Tutorial Completion** → Receive guaranteed rewards
6. **Main Game Access** → Unlock all mission types

## Core Game Loop

1. **Equip** - Select gear loadout from inventory
2. **Deploy** - Choose mission parameters and send character
3. **Wait** - Mission completes after set duration
4. **Collect** - Receive loot and experience based on mission outcome
5. **Manage** - Equip better gear, sell unwanted items

## Equipment System

### Equipment Slots
Each character has 9 equipment slots:

| Slot | Primary Stat | Secondary Effects | Valid Item Types |
|------|--------------|-------------------|------------------|
| Head | Defense +10-50 | Critical Chance +1-5% | Helmet, Hood, Mask |
| Shoulders | Defense +15-60 | Damage Reduction +2-8% | Pauldrons, Shoulder Guards |
| Back | Defense +5-30 | Loot Bonus +5-20% | Cloak, Cape, Backpack |
| Chest | Defense +20-80 | Health +50-200 | Armor, Vest, Jacket |
| Gloves | Attack Power +5-25 | Reload Speed +5-15% | Gloves, Gauntlets |
| Legs | Defense +10-40 | Mission Speed +5-20% | Pants, Greaves, Boots |
| Bracers | Attack Power +3-15 | Critical Damage +10-30% | Bracers, Wristguards |
| Weapon 1 | Damage 50-500 | Variable by type | Any weapon type |
| Weapon 2 | Damage 50-500 | Variable by type | Any weapon type |

### Equipment Rules

**Slot Restrictions:**
1. Each item has a designated `slot_type` property that must match the target slot
2. Items cannot be equipped to incompatible slots (e.g., helmet cannot go in chest slot)
3. Each slot can only hold one item at a time

**Equipping Process:**
1. Validate item `slot_type` matches target slot
2. Check if slot is currently occupied
3. If occupied, unequip current item to inventory
4. Verify inventory has space for unequipped item
5. If inventory full, equip action fails with error
6. Place new item in slot
7. Update character stats

**Equip Action Flow:**
```
EQUIP_ITEM(item_id, target_slot):
  1. Fetch item from inventory
  2. Validate: item.slot_type == target_slot
     - If false: Return ERROR "Invalid slot type"
  3. Check current_equipment[target_slot]
     - If empty: Go to step 6
     - If occupied: Continue to step 4
  4. Check inventory space
     - If full: Return ERROR "Inventory full"
     - If space available: Continue
  5. Move current_equipment[target_slot] to inventory
  6. Set current_equipment[target_slot] = item
  7. Remove item from inventory
  8. Recalculate character stats
  9. Return SUCCESS
```

**Unequip Rules:**
1. Items can be manually unequipped to inventory
2. Unequipping fails if inventory is full
3. Empty equipment slots are allowed (except during active missions)

### Rarity System
All equipment follows standard rarity tiers:

| Rarity | Color | Stat Multiplier | Drop Rate |
|--------|-------|-----------------|-----------|
| Common | Gray | 1.0x | 60% |
| Uncommon | Green | 1.25x | 25% |
| Rare | Blue | 1.5x | 10% |
| Epic | Purple | 2.0x | 4% |
| Legendary | Orange | 2.5x | 1% |

### Weapon Types

| Type | Base Damage | Attack Speed | Special Property |
|------|-------------|--------------|------------------|
| Assault Rifle | 100 | 1.0 | Balanced stats |
| Shotgun | 200 | 0.5 | +50% damage vs armored |
| SMG | 60 | 2.0 | +25% critical chance |
| Sniper Rifle | 300 | 0.3 | +100% critical damage |

## Mission System

### Mission Parameters

**Mission Types:**
1. **Tutorial** - Introduction mission (Duration: 2 minutes, one-time only)
2. **Scavenge Run** - Low risk, low reward (Duration: 5 minutes)
3. **Combat Patrol** - Medium risk, medium reward (Duration: 15 minutes)
4. **Elite Hunt** - High risk, high reward (Duration: 30 minutes)
5. **Boss Raid** - Very high risk, very high reward (Duration: 60 minutes)

**Mission Availability:**
- Tutorial: Automatically started on character creation
- Scavenge Run: Unlocked after tutorial
- Combat Patrol: Unlocked at level 5
- Elite Hunt: Unlocked at level 15
- Boss Raid: Unlocked at level 25

**Difficulty Levels:**
- Normal: Enemy Power 100, Loot Multiplier 1.0x
- Hard: Enemy Power 200, Loot Multiplier 1.5x
- Extreme: Enemy Power 400, Loot Multiplier 2.0x

**Mission Requirements:**
- All equipment slots must be filled before starting a mission
- Items cannot be unequipped while character is on active mission
- Equipment becomes "locked" during mission duration

### Success Calculation

Mission success is determined by comparing Player Power vs Mission Power:

```
Player Power = (Total Defense + Total Attack Power) * Equipment Quality Modifier
Mission Power = Enemy Power * Difficulty Multiplier

Success Chance = Player Power / (Player Power + Mission Power) * 100%
```

### Outcome States

| Outcome | Chance Calculation | Result |
|---------|-------------------|---------|
| Critical Success | Success Chance > 90% | 2x loot, 2x XP |
| Success | Success Chance 50-90% | Normal loot, normal XP |
| Partial Success | Success Chance 25-49% | 50% loot, 50% XP |
| Failure | Success Chance < 25% | No loot, 25% XP |

### Loot Generation

Each mission completion generates:
- 1-5 equipment pieces (based on mission type)
- Credits: 100-1000 (based on difficulty)
- Experience: 50-500 (based on mission length)

Loot rarity is weighted by mission difficulty and modified by equipment loot bonus stats.

## Character Progression

### Level System
- Levels: 1-50
- XP Required: Level * 100
- Each level grants: +10 base health, +5 base attack

### Power Calculation
```
Total Defense = Sum of all armor defense values + (Level * 5)
Total Attack = (Weapon 1 Damage + Weapon 2 Damage) / 2 + (Level * 3)
Critical Chance = Base 5% + Equipment bonuses
Critical Damage = Base 150% + Equipment bonuses
```

## Inventory Management

### Storage System
- Inventory Slots: 50 (expandable to 100)
- Equipment Bank: 100 slots
- Sorting Options: By slot, rarity, level requirement, stat type

### Item Properties
Every equipment piece contains:
```
{
  id: unique_identifier,
  name: string,
  slot_type: "head" | "shoulders" | "back" | "chest" | "gloves" | "legs" | "bracers" | "weapon",
  item_type: string, // e.g., "helmet", "cloak", "assault_rifle"
  rarity: rarity_tier,
  level_requirement: 1-50,
  primary_stat: stat_value,
  secondary_stats: [{stat_type, value}],
  sell_value: credits,
  equipped: boolean
}
```

## Economy System

### Currency
- **Credits**: Primary currency for all transactions
- Earned from: Mission completion, selling equipment
- Used for: Crafting, inventory expansion

### Crafting System
Combine 5 items of same rarity to create 1 item of next rarity:
- 5 Common → 1 Uncommon
- 5 Uncommon → 1 Rare
- 5 Rare → 1 Epic
- 5 Epic → 1 Legendary

### Vendor System
- Sell Price: Base value * Rarity multiplier * 0.25
- No direct purchasing of equipment
- Inventory expansion: 1000 credits per 10 slots

## Data Structures

### Player Data
```
{
  player_id: string,
  level: number,
  experience: number,
  credits: number,
  inventory_slots: number,
  active_missions: [{mission_id, start_time, end_time}],
  equipment: {
    head: item_object,
    shoulders: item_object,
    back: item_object,
    chest: item_object,
    gloves: item_object,
    legs: item_object,
    bracers: item_object,
    weapon_1: item_object,
    weapon_2: item_object
  },
  inventory: [item_objects],
  statistics: {
    missions_completed: number,
    total_loot_collected: number,
    highest_rarity_found: string
  }
}
```

### Mission Data
```
{
  mission_id: string,
  type: mission_type,
  difficulty: difficulty_level,
  duration: seconds,
  enemy_power: number,
  loot_table: [weighted_item_pool],
  credit_reward: {min, max},
  xp_reward: {min, max}
}
```

## Implementation Requirements

### Core Features (MVP)
1. Equipment system with all 9 slots
2. 4 mission types with 3 difficulty levels
3. Automated success calculation
4. Loot generation algorithm
5. Inventory management
6. Basic crafting system

### Database Tables
1. **accounts** - User accounts
   - account_id (PK)
   - email
   - password_hash
   - created_at
   - last_login

2. **characters** - Player characters
   - character_id (PK)
   - account_id (FK)
   - name (unique)
   - level
   - experience
   - credits
   - tutorial_completed
   - created_at

3. **equipment** - All equipment definitions
   - equipment_id (PK)
   - name
   - slot_type
   - item_type
   - rarity
   - level_requirement
   - primary_stat
   - secondary_stats (JSON)
   - is_starter (boolean)

4. **inventory** - Player-owned items
   - inventory_id (PK)
   - character_id (FK)
   - equipment_id (FK)
   - equipped_slot (nullable)
   - acquired_at

5. **missions** - Mission templates
   - mission_id (PK)
   - name
   - type
   - duration
   - min_level
   - enemy_power
   - credit_reward_min
   - credit_reward_max
   - xp_reward

6. **active_missions** - Currently running missions
   - active_mission_id (PK)
   - character_id (FK)
   - mission_id (FK)
   - start_time
   - end_time
   - locked_equipment (JSON)

7. **mission_history** - Completed mission logs
   - history_id (PK)
   - character_id (FK)
   - mission_id (FK)
   - completed_at
   - outcome
   - rewards (JSON)

### API Endpoints
- `POST /account/create` - Create new account
  - Request: `{email: string, password: string}`
  - Response: `{account_id: string, token: string}`
- `POST /character/create` - Create new character
  - Request: `{name: string}`
  - Response: `{character_id: string, starter_gear: [items], tutorial_mission: mission_object}`
- `POST /character/validate-name` - Check name availability
  - Request: `{name: string}`
  - Response: `{available: boolean, message: string}`
- `POST /mission/start` - Begin mission with equipment loadout
  - Validates all slots have equipment before starting
- `GET /mission/check` - Check mission status
- `POST /mission/complete` - Claim mission rewards
  - Tutorial completion sets `tutorial_completed: true`
- `GET /inventory` - Retrieve player inventory
- `POST /equipment/equip` - Change equipped items
  - Request: `{item_id: string, target_slot: string}`
  - Response: `{success: boolean, message: string, previous_item_id?: string}`
- `POST /equipment/unequip` - Remove item from slot
  - Request: `{slot: string}`
  - Response: `{success: boolean, message: string}`
- `POST /equipment/sell` - Sell items for credits
  - Cannot sell equipped items
- `POST /craft` - Combine items for upgrades
  - Cannot craft with equipped items

### Frontend Components
1. **Mission Selection** - Grid of available missions with timers
2. **Equipment Screen** - Character model with 9 slots, drag-drop interface
3. **Inventory Grid** - Sortable item list with filters
4. **Mission Status** - Active mission progress bars
5. **Results Modal** - Post-mission loot display
6. **Statistics Page** - Player progress tracking

## Balance Guidelines

### Time Investment
- Casual: 3-4 missions per day (20-30 minutes total wait)
- Regular: 8-10 missions per day (2-3 hours total wait)
- Hardcore: 15+ missions per day (optimize mission timings)

### Progression Rate
- Level 1-10: 1-2 days
- Level 10-25: 1 week
- Level 25-40: 2-3 weeks
- Level 40-50: 1 month

### Gear Acquisition
- Full common set: 1-2 hours
- Full uncommon set: 1-2 days
- Full rare set: 1 week
- First epic piece: 3-5 days
- Full epic set: 1 month