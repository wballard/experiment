<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Inventory</title>
    <link rel="stylesheet" href="assets/css/design-system.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/inventory.css">
</head>
<body>
    <div class="page-container">
        <h1>Debug Inventory</h1>
        
        <div id="debug-output"></div>
        
        <div class="inventory-grid" id="inventory-grid">
            <div class="page-loader">
                <p>Loading inventory items...</p>
            </div>
        </div>
    </div>

    <!-- Initialize global game state -->
    <script>
        window.CourierGame = {
            data: {
                items: {},
                playerLevel: 60,
                paragonLevel: 40,
                equippedItems: {}
            }
        };
    </script>
    
    <script>
        async function debugLoad() {
            const debugDiv = document.getElementById('debug-output');
            const inventoryGrid = document.getElementById('inventory-grid');
            
            try {
                debugDiv.innerHTML += '<p>Step 1: Loading JSON...</p>';
                
                const response = await fetch('assets/data/items.json');
                debugDiv.innerHTML += `<p>Fetch response: ${response.status}</p>`;
                
                if (response.ok) {
                    const data = await response.json();
                    debugDiv.innerHTML += `<p>JSON loaded: ${Object.keys(data.weapons).length} weapons, ${Object.keys(data.armor).length} armor</p>`;
                    
                    // Combine items
                    const allItems = { ...data.weapons, ...data.armor };
                    debugDiv.innerHTML += `<p>Combined items: ${Object.keys(allItems).length}</p>`;
                    
                    // Clear loading message
                    inventoryGrid.innerHTML = '';
                    
                    // Create inventory items directly
                    Object.values(allItems).forEach(item => {
                        const itemDiv = document.createElement('div');
                        itemDiv.className = `inventory-item rarity-${item.rarity}`;
                        itemDiv.innerHTML = `
                            <div class="item-icon">ðŸ“¦</div>
                            <div class="item-name">${item.name}</div>
                        `;
                        inventoryGrid.appendChild(itemDiv);
                    });
                    
                    debugDiv.innerHTML += `<p>Created ${Object.values(allItems).length} inventory items</p>`;
                } else {
                    debugDiv.innerHTML += `<p>Failed to load JSON: ${response.status}</p>`;
                }
            } catch (error) {
                debugDiv.innerHTML += `<p>Error: ${error.message}</p>`;
                console.error('Debug error:', error);
            }
        }
        
        document.addEventListener('DOMContentLoaded', debugLoad);
    </script>
</body>
</html>